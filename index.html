<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- 7.7 SEO (OPTIMISATION GOOGLE) -->
    <title>EM AREA - Le March√© Digital de Lom√©</title>
    <meta name="description" content="Achetez, vendez et trouvez un emploi √† Lom√©. Boutiques officielles, GPS, et offres d'emploi au Togo. L'application locale N¬∞1.">
    <meta name="keywords" content="Lom√©, Togo, E-commerce, Jobs, Emploi, Boutique, Achat, Vente, GPS, Zem, Pharmacie">
    <meta name="author" content="EM AREA Team">
    
    <!-- Open Graph (Pour les partages WhatsApp/Facebook) -->
    <meta property="og:title" content="EM AREA - March√© Digital Lom√©">
    <meta property="og:description" content="D√©couvrez les meilleures offres et boutiques √† Lom√©.">
    <meta property="og:image" content="https://img.icons8.com/color/512/shopping-basket-2.png">
    <meta property="og:url" content="https://emarea.tg">
    
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#f68b1e">
</head>
<body>

    <!-- 1.1 SPLASH SCREEN (√âcran de d√©marrage) -->
   <!-- 1.1 SPLASH SCREEN (√âpur√©) -->
<div id="splash-screen">
    <div class="splash-content">
        <!-- Juste le Logo et le Loader -->
        <div class="logo splash-logo">EM <span>AREA</span></div>
        <div class="splash-loader"></div>
    </div>
</div>
    
    <!-- 1.2 PULL TO REFRESH (Indicateur visuel cach√©) -->
    <div id="ptr-indicator">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6"></path><path d="M1 20v-6h6"></path><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
    </div>

   <header class="app-header">
    <a href="index.html" class="logo">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FF9F1C" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
        EM <span>AREA</span>
    </a>
    
    <!-- BOUTON PHARMACIE (Remplace la cloche) -->
   <!-- DANS LE HEADER DE index.html -->

<!-- Bouton Pharmacie Explicite -->
<div class="header-pill-btn" onclick="openPharmaModal()">
    <!-- Ic√¥ne -->
    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" stroke="none">
        <path d="M19 10h-5V5a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v5H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h5v5a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-5h5a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1z"/>
    </svg>
    <!-- Texte explicite -->
    <span>Pharmacies</span>
</div>
</header>

    <div class="container">
        <!-- BARRE DE RECHERCHE PRO -->
<div class="search-wrapper">
    <!-- Ic√¥ne fixe √† gauche -->
    <div class="search-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
    </div>
    
    <!-- L'input (Champ de texte) -->
    <input type="text" id="search-input" placeholder="Chercher un produit, une marque...">
    
    <!-- Le bouton "X" pour effacer (cach√© au d√©but) -->
    <div class="search-clear" id="search-clear" onclick="clearSearch()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
    </div>
</div>

        <!-- Boutiques -->
        <div class="section-title">
            <span>Boutiques Officielles</span>
            <span style="font-size:0.8rem; color:#888;" id="shop-count">0 actifs</span>
        </div>
        <div class="shops-slider" id="shops-container"></div>

        <!-- NOUVEAU : SLIDER PROMOS & TENDANCES -->
        <!-- Algorithme sp√©cial : Affiche les produits avec r√©duction ou Stars -->
        <div class="section-title">
            <span> Offres Flash & Promos</span>
            <span class="scroll-hint-text">Glisser ‚Üî</span>
        </div>
        
        <!-- Conteneur horizontal (Slider) -->
        <div class="promo-slider-container" id="promo-container">
            <!-- Rempli par JS -->
            <div class="loader-mini">Recherche des promos...</div>
        </div>

        <!-- Grille Produits Classique -->
        <div class="section-title">
            <span>üî• Tout le catalogue</span>
        </div>
        <div id="loader" style="text-align:center; padding:40px; color:#888;">Chargement...</div>
        <div class="product-grid" id="products-container"></div>
        
        <button id="load-more-btn" class="btn btn-outline" style="display:none;">Voir plus d'offres ‚Üì</button>
    </div>
    
<!-- AJOUT 2 : La section Historique (Juste avant le Footer) -->
<div class="container" id="history-section" style="display:none;">
    <div class="section-title">Vus r√©cemment</div>
    <div class="history-slider" id="history-container"></div>
</div>
    
    <!-- Footer -->
    <!-- DANS index.html (Remplacer tout le bloc footer existant) -->

<footer>
    <div class="container">
        <!-- Section du haut : Invitation √† installer -->
        <div class="install-box">
            <h3 style="color:white; margin:0 0 5px;">üì≤ Installez l'App</h3>
            <p>Acc√©dez au march√© plus rapidement sans passer par le navigateur.</p>
           <button class="btn btn-primary" onclick="installPWA()">
    Installer Maintenant
</button>
        </div>

        <div class="footer-content">
            <!-- Colonne 1 : √Ä propos -->
            <div class="footer-col">
                <div class="logo" style="margin-bottom:15px; color:white;">EM <span>AREA</span></div>
                <p style="font-size:0.8rem; line-height:1.6;">
                    Le premier march√© digital connect√© √† Lom√©. Trouvez des produits, des jobs et localisez les boutiques en un clic.
                </p>
                
                <!-- R√âSEAUX SOCIAUX AVEC LINKEDIN -->
                <div class="social-links">
                    <a href="#" class="social-icon"><svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a>
                    <a href="#" class="social-icon"><svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a>
                    <a href="#" class="social-icon">
                        <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
                    </a>
                </div>
            </div>

            <!-- Colonne 2 : Liens Rapides -->
            <div class="footer-col">
                <h3>Explorer</h3>
                <ul class="footer-links">
                    <li><a href="index.html">Accueil & Promos</a></li>
                    <li><a href="map.html">Carte GPS</a></li>
                    <li><a href="jobs.html">Offres d'emploi</a></li>
                    <li><a href="vendre.html">Devenir Vendeur</a></li>
                </ul>
            </div>

            <!-- Colonne 3 : Support -->
            <div class="footer-col">
                <h3>Support</h3>
                <ul class="footer-links">
                    <li><a href="#">Centre d'aide</a></li>
                    <li><a href="#">Conditions d'utilisation</a></li>
                    <li><a href="#">Politique de confidentialit√©</a></li>
                    <li><a href="#">Signaler un probl√®me</a></li>
                </ul>
            </div>
        </div>

        <!-- Bas de page -->
        <div class="footer-bottom">
            <p>&copy; 2025 EM AREA - Fait avec ‚ù§Ô∏è √† Lom√©, Togo.</p>
        </div>
    </div>
</footer>

    <!-- Bottom Nav -->
    <!-- √Ä REMPLACER DANS index.html, map.html ET jobs.html -->
<!-- MENU DU BAS (4 √âL√âMENTS) -->
<nav class="bottom-nav">
    <a href="index.html" class="nav-item active">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
        Accueil
    </a>
    

    <a href="jobs.html" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
        Jobs
    </a>
    
    <a href="map.html" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="10" r="3"/><path d="M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z"/></svg>
        Carte
    </a>
</nav>
<!-- Le bouton cach√© par d√©faut -->
    <button id="pwa-install-btn" style="display: none;">üì≤ Installer l'App</button>
    
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>AOS.init();
    // --- GESTION PWA ---
// --- 1. FONCTIONS POUR LA BELLE ALERTE ---
        function showCustomAlert(title, message) {
            const modal = document.getElementById('custom-alert');
            const titleEl = document.getElementById('alert-title');
            const msgEl = document.getElementById('alert-message');
            
            if(modal && titleEl && msgEl) {
                titleEl.textContent = title;
                // Remplace les sauts de ligne \n par des balises HTML <br>
                msgEl.innerHTML = message.replace(/\n/g, '<br>');
                modal.classList.add('active');
            } else {
                // Fallback si jamais le HTML manque
                alert(message);
            }
        }

        function closeAlert() {
            const modal = document.getElementById('custom-alert');
            if(modal) modal.classList.remove('active');
        }

        // Fermer si on clique dehors
        window.addEventListener('click', (e) => {
            const modal = document.getElementById('custom-alert');
            if (e.target === modal) closeAlert();
        });


        // --- 2. LOGIQUE PWA (INSTALLATION) ---
        
        // Enregistrement SW
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js');
            });
        }

        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log("Pr√™t √† installer !");
        });

        async function installPWA() {
            if (deferredPrompt) {
                // CAS 1 : Installation possible
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                deferredPrompt = null;
            } else {
                // CAS 2 : Installation impossible (ou d√©j√† faite)
                const isIos = /iPhone|iPad|iPod/.test(navigator.userAgent);
                
                if (isIos) {
                    showCustomAlert(
                        "üçé Installation sur iPhone", 
                        "1. Appuyez sur le bouton 'Partager' (carr√© avec fl√®che) en bas.\n2. Cherchez l'option 'Sur l'√©cran d'accueil' [+].\n3. Cliquez sur 'Ajouter'."
                    );
                } else {
                    showCustomAlert(
                        "‚ö†Ô∏è Installation Impossible",
                        "Raisons possibles :\n\n L'application est D√âJ√Ä install√©e (v√©rifiez vos applis).\nüîí Vous √™tes en navigation priv√©e.\nüåê Vous n'utilisez pas Chrome ou Edge."
                    );
                }
            }
        }

        window.addEventListener('appinstalled', () => {
            showCustomAlert("F√©licitations ! üéâ", "EM AREA est maintenant install√©e sur votre t√©l√©phone.");
            deferredPrompt = null;
        });
        </script>
    <script src="js/app.js"></script>

    <!-- Le bouton flottant Dark Mode -->
<div class="theme-toggle" onclick="toggleDarkMode()">
    üåì
</div>
    <!-- MODALE PHARMACIES -->
<div id="pharma-modal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h3> Pharmacies de Garde</h3>
            <button class="close-btn" onclick="closePharmaModal()">&times;</button>
        </div>
        <p style="font-size:0.8rem; color:#666; margin-bottom:15px;">Semaine en cours √† Lom√©.</p>
        
        <!-- Liste g√©n√©r√©e par JS -->
        <div id="pharma-list" class="pharma-list">Chargement...</div>
        
        <a href="tel:118" class="btn btn-primary" style="width:100%; text-align:center; margin-top:15px; background:#27ae60;">
            üìû Appeler Urgences (118)
        </a>
    </div>
</div>
    <!-- MODALE D'ALERTE PERSONNALIS√âE -->
<div id="custom-alert" class="modal-overlay" style="z-index: 4000;">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="alert-title">Notification</h3>
            <button class="close-btn" onclick="closeAlert()">&times;</button>
        </div>
        <!-- Le message s'affichera ici -->
        <div id="alert-message" style="font-size:0.9rem; line-height:1.6; color:#666; margin-bottom:20px;"></div>
        
        <button class="btn btn-primary" onclick="closeAlert()" style="width:100%;">C'est compris</button>
    </div>
</div>
    
</body>
</html>

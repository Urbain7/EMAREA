<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EM AREA</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">

    <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#f68b1e">
<link rel="apple-touch-icon" href="https://img.icons8.com/color/192/shopping-basket-2.png">
<meta name="apple-mobile-web-app-capable" content="yes">
    
</head>
<body>

   <header class="app-header">
    <a href="index.html" class="logo">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FF9F1C" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
        EM <span>AREA</span>
    </a>
    
    <!-- BOUTON PHARMACIE (Remplace la cloche) -->
    <div class="header-icon-btn" onclick="openPharmaModal()" style="color:#27ae60; background:#e8f8f5;">
        <!-- Ic√¥ne Croix M√©dicale -->
        <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" stroke="none">
            <path d="M19 10h-5V5a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v5H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h5v5a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-5h5a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1z"/>
        </svg>
    </div>
</header>

    <div class="container">
        <!-- Recherche -->
        <div style="margin-top: 20px;">
            <input type="text" id="search-input" placeholder="üîç Rechercher un produit..." style="width:100%; padding:12px 20px; border-radius:50px; border:1px solid #ddd; outline:none;">
        </div>

        <!-- Boutiques -->
        <div class="section-title">
            <span>Boutiques Officielles</span>
            <span style="font-size:0.8rem; color:#888;" id="shop-count">0 actifs</span>
        </div>
        <div class="shops-slider" id="shops-container"></div>

        <!-- NOUVEAU : SLIDER PROMOS & TENDANCES -->
        <!-- Algorithme sp√©cial : Affiche les produits avec r√©duction ou Stars -->
        <div class="section-title">
            <span> Offres Flash & Promos</span>
            <span class="scroll-hint-text">Glisser ‚Üî</span>
        </div>
        
        <!-- Conteneur horizontal (Slider) -->
        <div class="promo-slider-container" id="promo-container">
            <!-- Rempli par JS -->
            <div class="loader-mini">Recherche des promos...</div>
        </div>

        <!-- Grille Produits Classique -->
        <div class="section-title">
            <span>üî• Tout le catalogue</span>
        </div>
        <div id="loader" style="text-align:center; padding:40px; color:#888;">Chargement...</div>
        <div class="product-grid" id="products-container"></div>
        
        <button id="load-more-btn" class="btn btn-outline" style="display:none;">Voir plus d'offres ‚Üì</button>
    </div>
    
<!-- AJOUT 2 : La section Historique (Juste avant le Footer) -->
<div class="container" id="history-section" style="display:none;">
    <div class="section-title">Vus r√©cemment</div>
    <div class="history-slider" id="history-container"></div>
</div>
    
    <!-- Footer -->
    <!-- DANS index.html (Remplacer tout le bloc footer existant) -->

<footer>
    <div class="container">
        <!-- Section du haut : Invitation √† installer -->
        <div class="install-box">
            <h3 style="color:white; margin:0 0 5px;">üì≤ Installez l'App</h3>
            <p>Acc√©dez au march√© plus rapidement sans passer par le navigateur.</p>
            <button class="btn btn-primary" onclick="document.getElementById('pwa-install-btn').click()">
                Installer Maintenant
            </button>
        </div>

        <div class="footer-content">
            <!-- Colonne 1 : √Ä propos -->
            <div class="footer-col">
                <div class="logo" style="margin-bottom:15px; color:white;">EM <span>AREA</span></div>
                <p style="font-size:0.8rem; line-height:1.6;">
                    Le premier march√© digital connect√© √† Lom√©. Trouvez des produits, des jobs et localisez les boutiques en un clic.
                </p>
                
                <!-- R√âSEAUX SOCIAUX AVEC LINKEDIN -->
                <div class="social-links">
                    <a href="#" class="social-icon"><svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a>
                    <a href="#" class="social-icon"><svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a>
                    <a href="#" class="social-icon">
                        <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
                    </a>
                </div>
            </div>

            <!-- Colonne 2 : Liens Rapides -->
            <div class="footer-col">
                <h3>Explorer</h3>
                <ul class="footer-links">
                    <li><a href="index.html">Accueil & Promos</a></li>
                    <li><a href="map.html">Carte GPS</a></li>
                    <li><a href="jobs.html">Offres d'emploi</a></li>
                    <li><a href="vendre.html">Devenir Vendeur</a></li>
                </ul>
            </div>

            <!-- Colonne 3 : Support -->
            <div class="footer-col">
                <h3>Support</h3>
                <ul class="footer-links">
                    <li><a href="#">Centre d'aide</a></li>
                    <li><a href="#">Conditions d'utilisation</a></li>
                    <li><a href="#">Politique de confidentialit√©</a></li>
                    <li><a href="#">Signaler un probl√®me</a></li>
                </ul>
            </div>
        </div>

        <!-- Bas de page -->
        <div class="footer-bottom">
            <p>&copy; 2025 EM AREA - Fait avec ‚ù§Ô∏è √† Lom√©, Togo.</p>
        </div>
    </div>
</footer>

    <!-- Bottom Nav -->
    <!-- √Ä REMPLACER DANS index.html, map.html ET jobs.html -->
<nav class="bottom-nav">
    <!-- Lien Accueil -->
    <a href="index.html" class="nav-item active">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
        Accueil
    </a>
    
    <!-- NOUVEAU : Lien Jobs -->
    <a href="jobs.html" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
        Jobs
    </a>

    <!-- Lien Carte -->
    <a href="map.html" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="10" r="3"/><path d="M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z"/></svg>
        Carte
    </a>
</nav>
<!-- Le bouton cach√© par d√©faut -->
    <button id="pwa-install-btn" style="display: none;">üì≤ Installer l'App</button>
    
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>AOS.init();
    // --- GESTION PWA ---
let deferredPrompt;
const installBtn = document.getElementById('pwa-install-btn');

// 1. Enregistrement du Service Worker
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
            .then(reg => console.log('Service Worker enregistr√©'))
            .catch(err => console.log('Erreur SW:', err));
    });
}

// 2. D√©tection de la possibilit√© d'installation (Android/Chrome)
window.addEventListener('beforeinstallprompt', (e) => {
    // Emp√™che la barre automatique de Google
    e.preventDefault();
    deferredPrompt = e;
    // Affiche notre beau bouton
    installBtn.style.display = 'flex';
});

// 3. Clic sur le bouton
installBtn.addEventListener('click', async () => {
    if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        console.log(`R√©sultat: ${outcome}`);
        deferredPrompt = null;
        installBtn.style.display = 'none'; // Cache le bouton apr√®s
    }
});

// 4. Si d√©j√† install√©
window.addEventListener('appinstalled', () => {
    installBtn.style.display = 'none';
    console.log('Application install√©e !');
});
    </script>
    <script src="js/app.js"></script>

    <!-- Le bouton flottant Dark Mode -->
<div class="theme-toggle" onclick="toggleDarkMode()">
    üåì
</div>
    
</body>
</html>
